# Birdnest-Solution ![CI/CD](https://github.com/Melimet/Birdnest-Solution/actions/workflows/main.yml/badge.svg)


## Description

This is my solution to [Reaktor](https://www.reaktor.com/) winter 2022 [code challenge](https://assignments.reaktor.com/birdnest/). 
TLDR: Fetch location data from an external api -> Parse the response data -> fetch data from a second external api based on the parsed response -> display second api data on a website

### How it works
Birdnest Solution fetches data from pilot api each second and 


### Tech stack
Frontend: React.js + TypeScript
Backend: Node.js + Typescript

The application and the database are hosted on AWS ECS and RDS instances. These cloud instances were created using terraform. More information about the deployment can be found further down in this readme.

Monadikuikka images in frontend header were generated by [Dall-e](https://labs.openai.com/).


## Installation
Below are two different ways to run the project: through docker or shell scripts.
In order for the app to work, both ways require a postgreSQL db to be setup and configured to a environment file. [Here](https://www.codecademy.com/article/installing-and-using-postgresql-locally) is a guide to setup postgres locally. Alternatively postgres can be setup quite easily on a service such as [fly.io](https://fly.io/docs/postgres/getting-started/create-pg-cluster/).


### Step 0 for both ways
0. Configure environment variables in `./backend/.env`. The environment file must be configured so that the app can connect to a postgresql database - Otherwise the app will not run. `./backend/` contains a `.env.pub` file which contains a model .env file with examples. `.env.pub` must be renamed to `.env`
When `.env` is configured, make sure to remove ## and all text after them. Also make sure no whitespace is present in the file.

### Shell scripts

1. Excecute these commands in project root folder. These commands install required dependencies and start the app.
```
sh scripts/install_dependencies.sh
sh scripts/build_and_copy_frontend.sh
sh scripts/start.sh
```
2. The project can now be accessed in http://localhost:3001/.

### Docker
1. If you don't have docker installed, follow the [installation guide](https://docs.docker.com/get-docker/)
2. Execute in console
```
docker build -t birdnest-solution-image .
docker run -p 3001:3001 -d --env-file ./backend/.env --name birdnest-solution-container birdnest-solution-image
```
3. The project can now be accessed in http://localhost:3001/. The docker image will be running in the backround, it can be shut down with
```
docker stop birdnest-solution-container 
docker rm birdnest-solution-container
```
## Terraform
These terraform files are set to create an RDS db instance and an ECS instance running the application on AWS. The configuration files can be found in the `./terraform` folder. Terraform state is configured to be stored in Terraform cloud. Terraform validates and updates(if necessary) it's own state on each push to Github.

## Testing

Testing is implemented in the form of unit and integration tests in the backend. E2E tests were considered but seemed to be overkill since frontend has next to no functionalities and only passively displays information.

## Improvements
- For improved scalability, backend could be split in to two separate entities: A poller api that polls the provided apis and writes the pilot info into database and a simple express backend that responds to frontend's api requests.